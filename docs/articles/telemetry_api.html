<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quickstart Guide for the Telemetry API • telemetry</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Quickstart Guide for the Telemetry API">
<meta property="og:description" content="telemetry">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">telemetry</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/api_administration.html">Administering the Database</a>
    </li>
    <li>
      <a href="../articles/database.html">The Telemetry Database</a>
    </li>
    <li>
      <a href="../articles/telemetry_api.html">Quickstart Guide for the Telemetry API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Quickstart Guide for the Telemetry API</h1>
                        <h4 data-toc-skip class="author">Matt Espe</h4>
            
            <h4 data-toc-skip class="date">2024 Mar 19</h4>
      
      
      <div class="hidden name"><code>telemetry_api.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="establishing-a-session">Establishing a Session<a class="anchor" aria-label="anchor" href="#establishing-a-session"></a>
</h2>
<p>In order to start interacting with the API server, you must first
establish a session using a pre-established set of login credentials
(Username and Password). It is best practice to avoid storing these in
files which are easily shared with others either directly or indirectly
(e.g. an accidental git commit). Please note, this includes .Rhistory
files (which store console commands). Therefore, you want to use the
password in a way that defines it without ever printing it in your
script or R console.</p>
<p>A simple way to enact this is to stored login credentials in a file
that is separate from the analysis script, and is ignored by git in a
.gitignore file:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Defines api_url, usr, and pwd</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"api_credentials.R"</span>, echo <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Using these, we can establish a session,</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">telemetry</span><span class="op">)</span></span>
<span><span class="va">my_session</span> <span class="op">=</span> <span class="fu"><a href="../reference/start_session.html">start_session</a></span><span class="op">(</span><span class="va">usr</span>, <span class="va">pwd</span>, <span class="va">api_url</span><span class="op">)</span></span></code></pre></div>
<p>The returned object stores all the information about the session that
was just established, including the user who started the session, the
URL of the database server, the time the session was started (as the
session will timeout after some time), a curl handle for the session,
and a unique token for the server to identify the session. This object
is then passed into subsequent functions, simplifying the process of
interacting with the server.</p>
</div>
<div class="section level2">
<h2 id="downloading-data">Downloading data<a class="anchor" aria-label="anchor" href="#downloading-data"></a>
</h2>
<p>To download the data associated with an individual user, we use the
<code><a href="../reference/download_data.html">download_data()</a></code> function. This takes a session object
created above, as well as a region and speciesID to download data for.
It will download a SQLite3 database which is a subset of that the user
has access to. By default, this is stored in a temporary file (which is
deleted when the user’s computer is restarted), but we can also specifiy
a location to keep a persistent copy:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/download_data.html">download_data</a></span><span class="op">(</span><span class="va">my_session</span>, region <span class="op">=</span> <span class="fl">1</span>, speciesID <span class="op">=</span> <span class="fl">1</span>, db_file <span class="op">=</span> <span class="st">"my.db"</span><span class="op">)</span></span></code></pre></div>
<p>This stores the database in the file called <code>my.db</code> in the
current working directory.</p>
<p>Both <code>speciesID</code> and <code>region</code> are optional. If
both are omitted, the entire dataset the user has access to will be
returned.</p>
<p>Of note when selecting by species: Only tags that are registered in
the database will have a species associated with them. This means that a
query by species ID will return only registered tags.</p>
<p>We can extract data from this database with the function
<code><a href="../reference/extract_data.html">extract_data()</a></code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tele_data</span> <span class="op">=</span> <span class="fu"><a href="../reference/extract_data.html">extract_data</a></span><span class="op">(</span><span class="st">"my.db"</span><span class="op">)</span></span></code></pre></div>
<p>This creates a new environment (a list like object), which contains
all of the tables from the specified database file.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tele_data</span><span class="op">$</span><span class="va">Tags</span> <span class="co">## a data.frame of the Tags table</span></span></code></pre></div>
<p>Alternatively, we can assign the tables directly into our Global
environment, but this is potentially dangerous - it will overwrite any
existing objects with similar names as the tables in the database. Only
do this if you are sure you don’t have objects in your environment with
the same names, or do not mind losing those objects.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extract_data.html">extract_data</a></span><span class="op">(</span><span class="st">"my.db"</span>, env <span class="op">=</span> <span class="va">.GlobalEnv</span><span class="op">)</span> <span class="co"># Potentially dangerous!!</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="listing-entries">Listing entries<a class="anchor" aria-label="anchor" href="#listing-entries"></a>
</h2>
<p>When we want to see what the available entries for a certain category
are, e.g. species ID, we use the <code><a href="../reference/list_db_entry.html">list_db_entry()</a></code> function.
This function takes the name of the entry category, and returns a
<code>data.frame</code> of the respective entries. It requires an active
session.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_db_entry.html">list_db_entry</a></span><span class="op">(</span><span class="st">"species"</span>, session <span class="op">=</span> <span class="va">my_session</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="ending-a-session">Ending a session<a class="anchor" aria-label="anchor" href="#ending-a-session"></a>
</h2>
<p>Once we are done with our interactions with the database, we should
close out our session. We can do this with
<code><a href="../reference/end_session.html">end_session()</a></code></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/end_session.html">end_session</a></span><span class="op">(</span><span class="va">my_session</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Matt Espe.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
